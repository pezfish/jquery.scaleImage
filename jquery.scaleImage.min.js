(function(a){var l={},c,i,j,e,f,g,k,h,d={init:function(b){b&&a.extend(l,b);return this.each(function(){c=a(this);a(window).bind("resize",function(){h||(h=!0,window.setTimeout(function(){d._scaleImage();h=!1},200))});d._redraw()})},calcNewImg:function(){return this.each(function(){c=a(this);d._redraw()})},_redraw:function(){setTimeout(function(){d._calcImgRatio();a(window).trigger("resize");setTimeout(function(){c.show()},200)},50)},_calcImgRatio:function(){i=c.height();j=c.width();e=i/j},_scaleImage:function(){f= a(window).height();g=a(window).width();k=f/g;k>e?c.css({height:f,width:f/e}):c.css({height:g*e,width:g})}};a.fn.scaleImage=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on scaleImage")}})(jQuery);